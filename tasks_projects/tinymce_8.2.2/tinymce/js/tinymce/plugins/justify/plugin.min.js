(function () {
    tinymce.PluginManager.add('justify', function (editor) {

        function toggleAlign(value) {
            editor.execCommand('Justify' + value);
        }

        editor.ui.registry.addToggleButton('alignjustify', {
            icon: 'align-justify',
            tooltip: 'Justificar',
            onAction: function () {
                toggleAlign('Full');
            },
            onSetup: function (api) {
                var unbinder = editor.selection.selectorChanged('p,div', function (state) {
                    api.setActive(editor.queryCommandState('JustifyFull'));
                });
                return function () {
                    unbinder();
                };
            }
        });

        return {
            getMetadata: () => ({
                name: 'Justify Plugin',
                url: 'https://www.tiny.cloud/'
            })
        };
    });
})();
