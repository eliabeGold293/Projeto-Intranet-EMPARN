(function () {
    tinymce.PluginManager.add('lineheight', function (editor) {

        function applyHeight(value) {
            editor.formatter.register('lineheight-' + value, {
                selector: 'p,div,span,li',
                styles: { 'line-height': value }
            });

            editor.formatter.apply('lineheight-' + value);
        }

        editor.ui.registry.addMenuButton('lineheightselect', {
            text: 'EspaÃ§amento',
            fetch: function (callback) {
                callback([
                    { type: 'menuitem', text: '1.0', onAction: () => applyHeight('1') },
                    { type: 'menuitem', text: '1.2', onAction: () => applyHeight('1.2') },
                    { type: 'menuitem', text: '1.4', onAction: () => applyHeight('1.4') },
                    { type: 'menuitem', text: '1.5', onAction: () => applyHeight('1.5') },
                    { type: 'menuitem', text: '1.6', onAction: () => applyHeight('1.6') },
                    { type: 'menuitem', text: '2.0', onAction: () => applyHeight('2') }
                ]);
            }
        });

        return {
            getMetadata: () => ({
                name: 'Line Height Plugin',
                url: 'https://www.tiny.cloud/'
            })
        };
    });
})();
